<!doctype html>

<body>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    <style>
        html {
            background-color: black;
        }

        canvas {
            display: block;
            margin: 20vh auto;
        }

    </style>
    <script>
        var canvas, canvasContext;

        window.onload = function() {
            canvas = document.getElementById('gameCanvas');
            canvasContext = canvas.getContext('2d');

            setInterval(mainloop, 1000 / 50);
            document.addEventListener('keydown', keypressed);
            document.addEventListener('keyup', keyreleased);
        }

        function mainloop() {
            colorRect(0, 0, canvas.width, canvas.height, 'black'); // bg
            drawImg(background, imgXpos, imgYpos, imgW, imgH) //background
            colorRect(Xpos, Ypos, LINE_WIDTH, LineSize, 'orange') // bullet
            drawImg(player, playerXpos, playerYpos, playerSize, playerSize) //player ship
            cooldownFunc();
            playerMove();

            if (shoot && hit == false) {
                shooting();
            }

        } //end main func
        //vars
        //background vars
        var imgXpos = 0;
        var imgYpos = 0;
        var imgW = 800;
        var imgH = 600;
        //player vars
        var playerSize = 70;
        var playerXpos = 0;
        var playerYpos = 900 / 2;
        var playerXspeed = 10;
        var playerYspeed = 10;
        //enemy vars
        var BadShips = [];
        //key vars
        const WKey = 87;
        const SKey = 83;
        const DKey = 68;
        const AKey = 65;
        const ShootKey = 32;
        var w = false;
        var s = false;
        var d = false;
        var a = false;
        var shoot = false;
        //shooting vars
        const LineSize = 20;
        const LINE_WIDTH = 4;
        var Xpos = -20;
        var Ypos = -20;
        var YSpeed = 17;
        var hit = false;
        var cooldown = false;
        //end vars



        function colorRect(x, y, w, h, c) {
            canvasContext.fillStyle = c;
            canvasContext.fillRect(x, y, w, h);

        } //end func
        // image vars

        var background = new Image();
        background.src = 'images/background.jpg';

        var player = new Image();
        player.src = 'sprites/player.png';
        //end vars


        function drawImg(src, x, y, w, h) {
            canvasContext.drawImage(src, x, y, w, h);

        } //end func

        function SpawnEnemies() {
            var EnemySize = 40;
            var EnemyYSpeed = 7;
            var EnemyYpos = 0;
            var EnemyXpos = Math.floor(Math.random() * ((1080 / 2) + 800 - (1080 / 2)) + 1080 / 2);

            var enemy = {
                EnemyXpos: EnemyXpos,
                EnemyYpos: EnemyYpos,
                EnemySize: EnemySize,
                EnemyYSpeed: EnemyYSpeed
            }

            BadShips.push(enemy);

        }


        function shooting() {
            if (shoot &&  cooldown) {
                Xpos = playerXpos + (playerSize / 2);
                Ypos = playerYpos;
                shoot = false;
                hit = true;
            }

            if (hit ) {

                Ypos -= YSpeed
                hit = false;
                cooldown = false;
            }





        }

        function cooldownFunc() {
            if (Ypos < 0)
                cooldown = true;
        }

        function playerMove() {
            if (Xpos > 0) {
                Ypos = Ypos - YSpeed

            }

            if (d && playerXpos < canvas.width - playerSize) {
                playerXpos += playerXspeed;
            } // right move

            if (a && playerXpos > 0) {
                playerXpos -= playerXspeed;
            } // left move

            if (w && playerYpos > 0) {
                playerYpos -= playerYspeed;
            } //up move

            if (s && playerYpos < canvas.height - playerSize) {
                playerYpos += playerYspeed;
            } //down move




        } //end func

        function keypressed(evt) {
            if (evt.keyCode == AKey) { //left
                a = true;

            }
            if (evt.keyCode == DKey) { //right
                d = true;

            }
            if (evt.keyCode == WKey) { //up
                w = true;

            }
            if (evt.keyCode == SKey) { //down
                s = true;

            }
            if (evt.keyCode == ShootKey) { //shoot
                shoot = true;
                shooting();

            }


        } //end func




        function keyreleased(evt) {

            if (evt.keyCode == AKey) { //left
                a = false;
            }
            if (evt.keyCode == DKey) { //right
                d = false;

            }
            if (evt.keyCode == WKey) { //up
                w = false;

            }
            if (evt.keyCode == SKey) { //down
                s = false;

            }
            if (evt.keyCode == ShootKey) { //shoot


            }
        } //end func

    </script>
</body>
